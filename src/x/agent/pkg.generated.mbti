// Generated using `moon info`, DON'T EDIT IT
package "mizchi/bit/x/agent"

import {
  "mizchi/bit/lib",
  "mizchi/bit/object",
  "mizchi/bit/x/hub",
}

// Values
pub fn check_and_merge(String, AgentConfig, @hub.Hub, &@lib.ObjectStore, &@lib.RefStore, &@lib.Clock) -> TaskResult

pub fn evaluate_validation(Int, String) -> ReviewResult

pub fn execute_task(AgentTask, AgentConfig, @hub.Hub, &@lib.ObjectStore, &@lib.RefStore, &@lib.Clock, &@lib.WorkingTree) -> TaskResult

pub fn should_auto_review(@hub.PullRequest, AgentConfig) -> Bool

pub fn submit_validation_review(@hub.Hub, &@lib.ObjectStore, &@lib.RefStore, &@lib.Clock, String, String, ReviewResult, @object.ObjectId) -> Unit

// Errors

// Types and methods
pub struct AgentConfig {
  agent_id : String
  remote_url : String
  target_branch : String
  validation_cmd : String
  auto_merge : Bool
  poll_interval_ms : Int
}
pub fn AgentConfig::new(String, String, target_branch? : String, validation_cmd? : String, auto_merge? : Bool, poll_interval_ms? : Int) -> Self

pub struct AgentTask {
  id : String
  description : String
  edits : Array[FileEdit]
  pr_title : String
  pr_body : String
  source_branch : String
}
pub fn AgentTask::new(String, String, Array[FileEdit], String, String, String) -> Self

pub(all) enum FileEdit {
  Write(String, Bytes)
  Delete(String)
}

pub(all) enum ReviewResult {
  Approved
  Rejected(String)
  ValidationError(String)
}
pub impl Eq for ReviewResult
pub impl Show for ReviewResult

pub(all) enum TaskResult {
  PrCreated(String)
  PrMerged(String)
  PrRejected(String, String)
  ValidationFailed(String)
  Error(String)
}
pub impl Eq for TaskResult
pub impl Show for TaskResult

// Type aliases

// Traits

